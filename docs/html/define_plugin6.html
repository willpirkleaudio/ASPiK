<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASPiK SDK: The Buffer Processing Cycle</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ASPiK SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('define_plugin6.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The Buffer Processing Cycle </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The buffer processing cycle is complex but it is also defined and explained in high detail for AU, AAX, VST and the resulting ASPiK framework implementation in <b>Designing Audio Effects Plugins in C++</b>D 2nd Ed. by Will Pirkle so we won't go into major details here. The figure below shows the layout of a generic audio plugin's buffer processing cycle:<br />
 </p><div class="image">
<img src="bufferproc.png" alt="bufferproc.png"/>
</div>
<p> <br />
 You can see from the above figure that the buffer processing cycle consists of three components: reading incoming parameter updates from the GUI controls, processing the audio, then writing output parameter information to the VU meters or other output-only controls. The <a class="el" href="class_plugin_base.html" title="The PluginBase object is the base class for the Plugin Core object. ">PluginBase</a> defines three functions that correspond to this three-step architecture. These three functions will always be called in this exact order during each and every buffer processing cycle. <br />
<br />
 // &mdash; preProcess: sync GUI parameters here<br />
 <b>virtual bool preProcessAudioBuffers(ProcessBufferInfo&amp; processInfo);</b><br />
</p>
<p>// &mdash; process buffers – the DSP<br />
 <b>virtual bool processAudioBuffers(ProcessBufferInfo&amp; processBufferInfo);</b><br />
</p>
<p>// &mdash; postProcess: do update meters, plots, graphs<br />
 <b>virtual bool postProcessAudioBuffers(ProcessBufferInfo&amp; processInfo);</b><br />
<br />
</p>
<p><b>Buffer Pre-Processing</b><br />
 During the pre-processing phase, we make a single call to the function that synchronizes our plugin variables with the values stored in our plugin parameters. During this phase, it is impossible for the DAW, GUI or other entity to manipulate the parameters or the variables. The pre-processing function is:<br />
<br />
 // &mdash; do pre buffer processing<br />
 <b>bool <a class="el" href="class_plugin_core.html#a90fa43d29dbcb37c3fbaca6647dd492e" title="do anything needed prior to arrival of audio buffers ">PluginCore::preProcessAudioBuffers(ProcessBufferInfo&amp; processInfo)</a></b><br />
 {<br />
 &emsp;// &mdash; sync internal variables to GUI parameters<br />
 &emsp;<b>syncInBoundVariables();</b><br />
 &emsp;return true;<br />
 }<br />
<br />
 The <em>syncInBoundVariables</em> method has two components. The first part simply copies the updated parameter information into the bound variables we supplied during the parameter instantiation. More importantly, this function calls a secondary function that allows you to do any post-update calculations. This base class function is implemented in the <a class="el" href="class_plugin_core.html" title="The PluginCore object is the default PluginBase derived object for ASPiK projects. Note that you are fre to change the name of this object (as long as you change it in the compiler settings, etc...) ">PluginCore</a>: <br />
 <br />
 <b>bool postUpdatePluginParameter(int32_t controlID, double controlValue, ParameterUpdateInfo&amp; paramInfo)</b><br />
 <br />
 This function will be called for every parameter that is updated and will give you the chance to “cook” any variables that may need alteration as a result. We will demonstrate when you might use this function shortly. The incoming <a class="el" href="struct_parameter_update_info.html" title="Information about a paraemeter being updated. Used when bound variables are updated. Multiple advanced uses. ">ParameterUpdateInfo</a> structure contains boolean flags that will indicate why this function was called. Once the pre-processing phase is complete, your plugin needs to be fully setup to process audio. We will show an example of using this function later.<br />
 <br />
 <b>Buffer Post-Processing</b><br />
 The <em>postProcessAudioBuffers</em> method is called after all incoming buffers have been processed. The default implementation for this function is:<br />
 <br />
 <b>bool <a class="el" href="class_plugin_core.html#ac89ad17043e4c76c20685a3f45a8c75f" title="do anything needed prior to arrival of audio buffers ">PluginCore::postProcessAudioBuffers(ProcessBufferInfo&amp; processInfo)</a></b><br />
 {<br />
 &emsp;// &mdash; update outbound variables<br />
 &emsp;<b>updateOutBoundVariables();</b><br />
 &emsp;return true;<br />
 }<br />
 <br />
 This function simply calls the sub-function <em>updateOutboundVariables</em> which copies output parameter values into a special list that will be delivered back to the native parameter list, and then back to the GUI in a thread-safe manner. You won’t need to modify or mess with that function, but this is the opportunity for your plugin to do any other processing after the buffer processing is completed. This would only include processing after ALL audio data has been processed.<br />
<br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ASPiK Developer&#39;s Guide</a></li><li class="navelem"><a class="el" href="simple_plugin.html">Write a Plugin</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
