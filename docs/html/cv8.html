<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASPiK SDK: Use the ICustomView Pointer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ASPiK SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('cv8.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Use the <a class="el" href="class_i_custom_view.html" title="Custom View interface to allow plugin core to create safe communication channels with GUI custom view...">ICustomView</a> Pointer </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Back in the <a class="el" href="class_plugin_core.html" title="The PluginCore object is the default PluginBase derived object for ASPiK projects. Note that you are fre to change the name of this object (as long as you change it in the compiler settings, etc...) ">PluginCore</a>'s <b><a class="el" href="class_plugin_core.html#adbc0df1ec8d13b5ed0540feadaab4c2f" title="For Custom View and Custom Sub-Controller Operations. ">PluginCore::processMessage( )</a></b> function, we add the code to the handler for the PLUGINGUI_TIMERPING message that will pump out the queued audio data and call the repaint message on the custom view object. Note that we are sharing the same lock-free ring buffer that the <a class="el" href="class_plugin_core.html" title="The PluginCore object is the default PluginBase derived object for ASPiK projects. Note that you are fre to change the name of this object (as long as you change it in the compiler settings, etc...) ">PluginCore</a> object owns and distributing (copying) data to both custom views:<br />
 <br />
 <b>case PLUGINGUI_TIMERPING:</b><br />
 {<br />
 &emsp;<b>if (waveView || spectrumView)</b><br />
 &emsp;{<br />
 &emsp;float audioSample = 0.0;<br />
</p>
<p>&emsp;// &mdash; try to get a value from queue<br />
 &emsp;<b>bool success = customViewDataQueue.try_dequeue(audioSample);</b><br />
</p>
<p>&emsp;// &mdash; if succeeds:<br />
 &emsp;<b>if (success)</b><br />
 &emsp;{<br />
 &emsp;// &mdash; empty queue into views; the each handle this differently<br />
 &emsp;<b>while (success)</b><br />
 &emsp;{<br />
 &emsp;&emsp;if (waveView)<br />
 &emsp;&emsp;&emsp;<b>waveView-&gt;pushDataValue(audioSample);</b><br />
 <br />
 &emsp;&emsp;if (spectrumView)<br />
 &emsp;&emsp;&emsp;<b>spectrumView-&gt;pushDataValue(audioSample);</b><br />
 <br />
 &emsp;&emsp;// &ndash; try to get next value until queue is empty<br />
 &emsp;&emsp;<b>success = customViewDataQueue.try_dequeue(audioSample);</b><br />
 &emsp;&emsp;}<br />
 &emsp;}<br />
 <br />
 &emsp;// &mdash; update and mark view as dirty<br />
 &emsp;if (waveView)<br />
 &emsp;&emsp;<b>waveView-&gt;updateView();</b><br />
 <br />
 &emsp;if (spectrumView)<br />
 &emsp;&emsp;<b>spectrumView-&gt;updateView();</b><br />
 <br />
 &emsp;return true;<br />
 &emsp;}<br />
 <br />
 &emsp;return false;<br />
 }<br />
 <br />
 This is all the code that you need to make the system work. The lock-free ring buffers and the custom view object handle the rest of the work.<br />
<br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ASPiK Developer&#39;s Guide</a></li><li class="navelem"><a class="el" href="gui_design.html">Design a GUI</a></li><li class="navelem"><a class="el" href="define_g_u_i6.html">Advanced GUI Topics</a></li><li class="navelem"><a class="el" href="gui_designer11.html">Custom Views</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
