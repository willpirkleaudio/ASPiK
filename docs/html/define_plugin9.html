<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASPiK SDK: Adding more Channel I/O Formats</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ASPiK SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('define_plugin9.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Adding more Channel I/O Formats </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When you create a new ASPiK project, it will automatically declare these channel I/O combinations for you in the <a class="el" href="class_plugin_core.html" title="The PluginCore object is the default PluginBase derived object for ASPiK projects....">PluginCore</a> constructor. <br  />
 <br  />
 • Mono input to mono output (1 -&gt; 1)<br  />
 • Mono input to stereo output (1 -&gt; 2)<br  />
 • Stereo input to stereo output (2 -&gt; 2)<br  />
 <br  />
 The <em>processAudioFrame</em> function is already set up to decode these three I/O configurations as well. Adding more configurations is very easy and you can also add your own configuration definitions.<br  />
 <br  />
 AU, AAX and VST all support different types of multi-channel operation that is beyond simple stereo. However, there are variations within each API, and there are some formats that are not supported in every API. So, if you decide you want to write a plugin for a multi-channel Ambisonics format you will likely not be able to write it for all APIs. For example, AU does not support channel I/O greater than 10 inputs and 10 outputs. On the other hand, VST3 supports up to 22.1 channel plugins, including variations for both Sony and DTS surround sound, while AAX supports Sony, DTS and most of the obscure Ambisonics formats. The first thing you need to decide is how many formats to support. Then, you need to describe each supported combination. If you support a side-chain input, you will need to describe the channel combinations your plugin will support (though there are some limitations on side-chains that are API-specific). This is best explained with the sample code, so go back to the <a class="el" href="class_plugin_core.html" title="The PluginCore object is the default PluginBase derived object for ASPiK projects....">PluginCore</a> constructor. There are two base class functions that will make setting up your supported channels a simple operation. You just call the functions to add your supported combinations. The functions are:</p>
<div class="fragment"><div class="line">addSupportedIOCombination( )</div>
<div class="line">addSupportedAuxIOCombination( )</div>
</div><!-- fragment --><p>The channel configurations consist of a simple array that stores an input and output channel configuration pair. Enumerations for each type of channel configuration are found in the pluginstructures.h file.</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div>
<div class="line">&lt;strong&gt;<span class="keyword">enum</span> <a class="code hl_enumeration" href="group___constants-_enums.html#ga52e348ed94297a3d3eb40fef52ad5729">channelFormat</a>&lt;/strong&gt;&lt;br&gt;</div>
<div class="line">{</div>
<div class="line">   kCFNone,</div>
<div class="line">   kCFMono,</div>
<div class="line">   kCFStereo,</div>
<div class="line">   kCFLCR,</div>
<div class="line">   kCFLCRS,</div>
<div class="line">   kCFQuad,</div>
<div class="line">   kCF5p0,</div>
<div class="line">   kCF5p1</div>
<div class="line">   etc . . .</div>
<div class="line">}</div>
<div class="ttc" id="agroup___constants-_enums_html_ga52e348ed94297a3d3eb40fef52ad5729"><div class="ttname"><a href="group___constants-_enums.html#ga52e348ed94297a3d3eb40fef52ad5729">channelFormat</a></div><div class="ttdeci">channelFormat</div><div class="ttdoc">Use this enum to identify plugin channel formats. Steinberg calls these &quot;speaker arrangements&quot;.</div><div class="ttdef"><b>Definition:</b> pluginstructures.h:115</div></div>
</div><!-- fragment --><p>You define a channel I/O configuration as an array pair using the enumerations above, and past this value to the helper functions. For ASPiK projects, this is pre-coded for you as:</p>
<div class="fragment"><div class="line"><span class="comment">// --- for FX plugins</span></div>
<div class="line"><span class="keywordflow">if</span>(getPluginType() == kFXPlugin)</div>
<div class="line">{</div>
<div class="line">   addSupportedIOCombination({kCFMono, kCFMono});</div>
<div class="line">   addSupportedIOCombination({kCFMono, kCFStereo});</div>
<div class="line">a   ddSupportedIOCombination({kCFStereo, kCFStereo});</div>
<div class="line">}</div>
<div class="line"><span class="comment">//</span></div>
</div><!-- fragment --><p>Besides mono and stereo, the most popular multi-channel format might be 5.1, which is encoded as <em>kCF5p1</em> above. To add support for 5.1 plugins, you would add the following to the above if() statement:</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div>
<div class="line">addSupportedIOCombination({kCF5p1, kCF5p1});</div>
<div class="line"><span class="comment">//</span></div>
</div><!-- fragment --><p>For a 5.1-to-stereo fold-down plugin, you would write:</p>
<div class="fragment"><div class="line"><span class="comment">//</span></div>
<div class="line">addSupportedIOCombination({kCF5p1, kCFStereo});</div>
<div class="line"><span class="comment">//</span></div>
</div><!-- fragment --><p><br  />
 You can also see that there are both Sony and DTS versions of higher channel-count formats. After describing your plugin's normal input/output channel configurations, you do the same for the side-chain using the aux IO variables. If you enable the side chain during the ASPiK CMake setup, then this code is written for you.</p>
<div class="fragment"><div class="line"><span class="comment">// --- for sidechaining, we support mono and stereo inputs; &lt;br&gt;</span></div>
<div class="line">addSupportedAuxIOCombination({kCFMono, kCFNone});</div>
<div class="line">addSupportedAuxIOCombination({kCFStereo, kCFNone});</div>
<div class="line"><span class="comment">//</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ASPiK Developer&#39;s Guide</a></li><li class="navelem"><a class="el" href="simple_plugin.html">Write a Plugin</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
